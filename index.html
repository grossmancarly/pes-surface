function updatePlot() {
    let k = parseFloat(document.getElementById("EaSlider").value);
    let sliderValue = parseFloat(document.getElementById("aSlider").value);
    let c = parseFloat(document.getElementById("cSlider").value);
    let a = transformSliderValue(sliderValue);
    let data = generateData(k, a, c);

    // Surface plot
    let surfacePlot = {
        type: 'surface',
        x: data.x,
        y: data.y,
        z: data.z,
        colorscale: 'Viridis',
        showscale: false
    };

    // Contour plot
    let contourPlot = {
        type: 'contour',
        x: data.x,
        y: data.y,
        z: data.z,
        contours: { 
            coloring: showHeatmap ? 'heatmap' : 'lines',
            showlines: true, 
            start: 1,  
            end: 4, 
            size: (4 - 1) / (20)
        },
        line: {
            width: showHeatmap ? 1 : 3, 
            color: 'black'
        },
        colorscale: 'Viridis'
    };

    // Reaction Coordinate function
    let reactionCoordinates = [];
    let potentials = [];
    let reactionPathwayLine = null;

    if (showReactionPathway) {
        // Reaction Pathway Plot
        for (let s = 0.2; s <= 5; s += 0.01) {
            reactionCoordinates.push(reactionCoordinate(s, k, a, c));
            potentials.push(potential(s));
        }

        let reactionPlot = {
            x: potentials,
            y: reactionCoordinates,
            mode: 'lines',
            type: 'scatter',
            line: { color: '#007BFF' }
        };

        // Reaction pathway line
        reactionPathwayLine = {
            x: data.x,
            y: data.x.map(x => 1/x), // y = 1/x
            mode: 'lines',
            type: 'scatter',
            line: { color: 'red', dash: 'dash' },
            name: 'y = 1/x'
        };

        // Layout for reaction plot (V vs X)
        let layoutReaction = {
            showlegend: false,
            height: 500,
            margin: { l: 50, r: 50, b: 50, t: 50 },
            xaxis: { title: 'Reaction Coordinate' },
            yaxis: { title: 'Potential (V)', range: [0.5,2.5] }
        };

        Plotly.newPlot('reaction-plot', [reactionPlot], layoutReaction);
    }

    // Layout for surface plot
    let layout3D = {
        showlegend: false,
        height: 500,
        margin: { l: 50, r: 50, b: 50, t: 50 },
        scene: { xaxis: { title: 'rBC' }, yaxis: { title: 'rAB' }, zaxis: { title: 'V' } }
    };

    // Layout for contour plot
    let layoutContour = {
        showlegend: false,
        height: 500,
        margin: { l: 50, r: 50, b: 50, t: 50 },
        xaxis: { 
            title: 'rBC',
            range: [0, 5]  
        },
        yaxis: { 
            title: 'rAB',
            scaleanchor: 'x', 
            scaleratio: 1,
            range: [0, 5]  
        }
    };

    // Include reaction pathway line (y = 1/x) if enabled
    let contourData = [contourPlot];
    if (showReactionPathway) {
        contourData.push(reactionPathwayLine); // Add the line to the contour plot
    }

    Plotly.newPlot('plot-3D', [surfacePlot], layout3D);
    Plotly.newPlot('plot-contour', contourData, layoutContour);
}
